<%- include("partials/headerFooter/header.ejs") -%>

<h1 class="white-text">Macro Calculator</h1>

<div class="card">
  <div class="card-body">
    <form action="/macrocalc" method="POST">
      <div class="md-form">
        <label for="numberExample">Enter Weight</label>
        <input type="number" class="form-control"  name="weight" max="9999" required>
      </div>
      <button class="my-btn btn-m my-btn-secondary waves-effect waves-orange">Calculate Macros</button>
    </form>
    <h3 class="macro-header" style="margin-bottom: 20px; margin-top: 20px;">Weight: <%= weight%></h3>
  </div>
</div>

<% const stableCals = weight * 15 %> 
<% const deficitCals = weight * 12 %> 
<% const dailyProtein = (deficitCals * .27)/4  %> 
<% const dailyCarbs = (deficitCals * .4)/4 %> 
<% const dailyFats = (deficitCals * .33)/9 %> 
<% const perMealProtein = dailyProtein/3 %> 
<% const perMealCarbs = dailyCarbs/3 %> 
<% const perMealFats = dailyFats/3 %> 

<% if (weight != null) { %>

  <div class="card">
    <div class="card-body">
      <h4 class="report-tile-title">Recommended Calorie Trackers </h4>
      <p><a href="https://www.mynetdiary.com/">MyNetDiary</a> and <a href="https://www.myfitnesspal.com/">MyFitnessPal</a></p>
    </div>
  </div>

</div>

  <div class="horizontal-scroll">
    <div style="margin-left: 10px;"></div>

    <!-- Card -->
    <div class="col-md">
      <div class="card chart-card">
        <div class="card-body">
          <h4 class="report-tile-title">Deficit Calories</h4>
            <p class="chart-nmbr-lg"><%=deficitCals.toLocaleString('en')%></p>
          <p class="chart-subtext no-margin-bottom">Based on <%=stableCals.toLocaleString('en')%> stable calories</p>
        </div>
      </div>
    </div>

    <!-- Card -->
    <div class="col-md">
      <div class="card chart-card">
        <div class="card-body">
          <h4 class="report-tile-title">Daily Macros</h4>
              <div>
                  <p class="chart-text">Protein:</p>
                  <p class="chart-text chart-text-right"><%= dailyProtein.toFixed(0)%> g</p>
              </div>
              <div>
                  <p class="chart-text">Carbs</p>
                  <p class="chart-text chart-text-right"><%= dailyCarbs.toFixed(0)%> g</p>
              </div>
              <div>
                  <p class="chart-text">Fats</p>
                  <p class="chart-text chart-text-right"><%= dailyFats.toFixed(0)%> g</p>
              </div>
        </div>
      </div>
    </div>

    <!-- Card -->
    <div class="col-md">
      <div class="card chart-card">
        <div class="card-body">
          <h4 class="report-tile-title">Per Meal Macros</h4>
              <div>
                  <p class="chart-text">Protein:</p>
                  <p class="chart-text chart-text-right"><%= perMealProtein.toFixed(0)%> g</p>
              </div>
              <div>
                  <p class="chart-text">Carbs</p>
                  <p class="chart-text chart-text-right"><%= perMealCarbs.toFixed(0)%> g</p>
              </div>
              <div>
                  <p class="chart-text">Fats</p>
                  <p class="chart-text chart-text-right"><%= perMealFats.toFixed(0)%> g</p>
              </div>
        </div>
      </div>
    </div>

  </div>

<%}%> 

<div class="container-fluid">

<a href="/dashboard">Return to Dashboard</a>

<%- include("partials/headerFooter/footer.ejs") -%>